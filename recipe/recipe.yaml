context:
  name: zed
  version: "0.202.7"

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  - url: https://github.com/zed-industries/zed/archive/v${{ version }}.tar.gz
    sha256: 61c3274102778f74d4ae1ef843b48474c343a32ac5c6bcaa2e66da7181ca8e44

build:
  number: 0

requirements:
  build:
    - ${{ compiler('rust') }}
    - ${{ compiler('c') }}
    - ${{ compiler('cxx') }}
    - ${{ stdlib('c') }}
    - cargo-bundle-licenses
    - pkg-config
    - cmake
    - if: win
      then:
        - sqlite
        - openssl
        - nasm
        - libssh2
        - libgit2
        - ucrt

  host:
    - if: linux
      then:
        - alsa-lib
        - curl
        - libxcb
        - openssl
        - sqlite
        - libvulkan-loader
        - vulkan-tools
        - wayland
        - zlib
        - zstd
        - clang
        - mold
        - cmake
        - xorg-libx11
        - xorg-xproto
        - xorg-kbproto
        - libxkbcommon
    - if: win
      then:
        - ninja
        - cmake
        - lld
        - sqlite
        - openssl
        - nasm
        - libssh2
        - libgit2
        - ucrt

tests:
  - script:
      - zed --help
about:
  homepage: https://zed.dev/
  summary: Code at the speed of thought
  description: |
    Zed is a high-performance, multiplayer code editor from the creators of Atom and Tree-sitter.
  license: Apache-2.0
  license_file:
    - LICENSE-AGPL
    - LICENSE-APACHE
    - LICENSE-GPL
    - THIRDPARTY.yml
  repository: https://github.com/zed-industries/zed

extra:
  recipe-maintainers:
    - lucascolley
    - Hofer-Julian
    - zelosleone
